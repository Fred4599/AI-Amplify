---
import { BOOKING_URL } from '../config';
---
<!-- Sticky bottom CTA: always visible on mobile, appears on scroll on desktop for maximum call conversions -->
<div id="sticky-call-cta" class="sticky-call-cta-bar fixed bottom-0 left-0 right-0 z-40 p-3 sm:p-4 pb-[max(0.75rem,env(safe-area-inset-bottom))] bg-black/95 backdrop-blur-md border-t border-white/10 md:opacity-0 md:pointer-events-none md:translate-y-4 md:transition-all md:duration-300 aria-label="Book your strategy call with Braydon">
    <div class="max-w-[1200px] mx-auto flex flex-col sm:flex-row items-center justify-center gap-3 sm:gap-4">
        <p class="text-white font-medium text-sm sm:text-base text-center sm:text-left shrink-0">
            Get your free 15-min strategy call with Braydon
        </p>
        <a href={BOOKING_URL} target="_blank" rel="noopener noreferrer" class="w-full sm:w-auto inline-flex items-center justify-center gap-2 px-6 py-3.5 sm:py-3 bg-white text-black rounded-full font-semibold text-sm hover:bg-neutral-200 transition-colors shrink-0 min-h-[48px]">
            Book your free call with Braydon
            <i data-lucide="arrow-right" class="w-4 h-4"></i>
        </a>
    </div>
</div>

<script>
    (function() {
        const bar = document.getElementById('sticky-call-cta');
        if (!bar) return;
        const mobile = window.matchMedia('(max-width: 767px)');
        let desktopVisible = false;

        function update() {
            if (mobile.matches) {
                bar.classList.add('sticky-cta-visible');
                return;
            }
            const pastHero = window.scrollY > window.innerHeight * 0.5;
            if (pastHero && !desktopVisible) {
                desktopVisible = true;
                bar.classList.add('sticky-cta-visible');
            }
        }

        window.addEventListener('scroll', update, { passive: true });
        update();
        if (typeof lucide !== 'undefined') lucide.createIcons();
    })();
</script>
